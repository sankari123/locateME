<!DOCTYPE html>
<html>
    <head>
	<script type="text/javascript" src="cordova.js"></script>
        <script src="http://maps.google.com/maps/api/js?sensor=false"> </script>
        <script>
		var canvas,ctx;
    var mouseX,mouseY,mouseDown=0;
    var touchX,touchY;
    var lastX,lastY=-1;
	var tmp;
    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value
   var drawn=null;
    document.addEventListener("deviceready",onDeviceReady,false);
    var latitude ;
		var longitude;
            if (navigator.geolocation)
            {
                navigator.geolocation.getCurrentPosition(handle_geolocation_query);
            }
            else
            {
               alert("Geolocation API not supported.");
            }
		
    function onDeviceReady() {
    	 document.addEventListener("backbutton", function (e) {
        e.preventDefault(); 
    navigator.notification.confirm("Do you want to exit DIVE?", onConfirmExit, "DIVE", "Yes,No");
    }, false );
}
		//
		
		function showMenu()
 {
     // alert(latitude); 
window.location.href = "http://www.writeacademy.in/dive/tstphp.php?lat1=" + latitude+"&long1="+longitude; 
     }
		
		
			
			function handle_geolocation_query(position)
        {
		 latitude = position.coords.latitude;
                longitude = position.coords.longitude;
                document.getElementById("lat1").value=latitude;
			   document.getElementById("long1").value= longitude;
				
		  // alert(latitude);
		    var c = document.getElementById("myCanvas");
			var ctx = c.getContext("2d");
			ctx.clearRect(0,0,c.width, c.height);
   		   c.width = window.innerWidth;
			c.height = window.innerHeight;
           var google_tile = "http://maps.google.com/maps/api/staticmap?sensor=false&center=" + latitude + "," +longitude + "&zoom=19&size="+c.width+"x"+c.height+"&markers=color:blue|label:U|" +latitude + ',' + longitude;
			//var google_tile = "http://maps.google.com/maps/api/staticmap?sensor=false&center=" + latitude + "," +longitude + "&zoom=19&size=300x400&markers=color:blue|label:U|" +latitude + ',' + longitude;
            var canvas = document.getElementById("myCanvas");
            var context = canvas.getContext("2d");   
            var imageObj = new Image();
            imageObj.src = google_tile;
            
            imageObj.onload = function(){
              context.drawImage(imageObj, 0, 0);
            }
        }
		
        </script>
     <title>DIVE</title>
    </head>
    <style>
    #myCanvas {
        height: 400px;
        width: 700px;
     }
	#mapPlaceholder {
        height: 400px;
        width: 700px;
    </style>
    <body>
	    <table>
<form id="add_contact" action="passVar1.php" method="post">
<input type="hidden" id="lat1" /> <br />
<input type="hidden" id="long1" /> 
<tr><td><input type="button" value="LIST" onclick="showMenu();" /></td><td><input type="button" value="MAP" id="mapItm" onclick="showMenu();" /></td></tr>
</form>
	    </table>
        <div>
			<div id="mapPlaceholder">  <canvas id="myCanvas">   </canvas></div>
        </div>
    </body>
</html>
